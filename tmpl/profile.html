<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="/tmpl/css/tws-style.css">
        <title>Profile Page</title>
    </head>
    <body class="tws-light-grey">
    <div class="tws-content" style="max-width: 1400px">
        <a class="tws-button tws-padding-large tws-white tws-border tws-left" href="/compose_post/">
            <b>Post</b>
        </a>

        <a class="tws-button tws-padding-large tws-white tws-border tws-right" href="{{if .SessionOwnerData.IsLogged }} /logout/ {{ else }} /login/ {{ end }}">
            {{ if .SessionOwnerData.IsLogged }} Log out {{ else }} Login {{ end }}
        </a>
        <a class="tws-button tws-padding-large tws-white tws-border tws-right" href="/">
            Main page
        </a>
        {{ if .SessionOwnerData.IsLogged }}
        <a class="tws-button tws-padding-large tws-white tws-border tws-right" href="/profile/">
            Profile
        </a>
        {{ end }}
        <div class="tws-content-main">
            <header class="tws-container tws-center tws-padding-32">
                <div class="tws-center">
                    <h1>
                        <b>Profile Page</b>
                    </h1>
                </div>
                <p>Hello, user with the user id {{.ProfileOwnerData.Id }}!</p>
                <img class="tws-avatar medium" src="{{.ProfileOwnerData.AvatarUrl}}" alt="User avatar">
            </header>

            {{range $post := $.Posts}}
            <div class="tws-card tws-margin tws-container">
                <div class="tws-col d1">
                    <img class="tws-avatar fit" src="{{ $post.OwnerAvatar }}" alt="User avatar">
                </div>
                <div class="tws-col d9">
                    <div class="tws-post">
                        <div class="tws-post-header-line" >
                            <p class="tws-bold tws-lineshare" style="margin: 0px;">{{ $post.OwnerName }} </p>
                                {{  if eq $.SessionOwnerData.Id $post.OwnerId }}
                                    <a class="tws-lineshare tws-right" href="/delete_post/?postID={{ $post.PostId }}">
                                        <img src="../img/icons/cross-small.png" class="tws-icon-small">
                                    </a>
                                {{ end }}
                        </div>
                        <p class="tws-post-text">{{ $post.Text }}</p>
                        <div class="tws-post-bottom-line" >
                            <a class="tws-col tws-icon" href="/like_post/?postID={{ $post.PostId }}&postOwnerID={{ $post.OwnerId }}">
                                <img src="../img/icons/heart.png" class="tws-icon-small tws-lineshare">
                                <p class="tws-lineshare">{{ len $post.Likes }}</p>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {{end}}
        </div>
    </div>
    </body>
</html>